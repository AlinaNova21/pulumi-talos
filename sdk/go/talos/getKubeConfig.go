// *** WARNING: this file was generated by pulumigen. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package talos

import (
	"context"
	"reflect"

	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// retrieve kubeconfig from a talos cluster
func GetKubeConfig(ctx *pulumi.Context, args *GetKubeConfigArgs, opts ...pulumi.InvokeOption) (*GetKubeConfigResult, error) {
	var rv GetKubeConfigResult
	err := ctx.Invoke("talos:index:getKubeConfig", args.Defaults(), &rv, opts...)
	if err != nil {
		return nil, err
	}
	return &rv, nil
}

type GetKubeConfigArgs struct {
	// node endpoint address
	Endpoint string `pulumi:"endpoint"`
	// node address
	Node string `pulumi:"node"`
	// talosconfig
	TalosConfig string `pulumi:"talosConfig"`
	// timeout in seconds (default 600)
	Timeout *int `pulumi:"timeout"`
}

// Defaults sets the appropriate defaults for GetKubeConfigArgs
func (val *GetKubeConfigArgs) Defaults() *GetKubeConfigArgs {
	if val == nil {
		return nil
	}
	tmp := *val
	if isZero(tmp.Timeout) {
		timeout_ := 600
		tmp.Timeout = &timeout_
	}
	return &tmp
}

type GetKubeConfigResult struct {
	// kubeconfig retrieved from the talos cluster
	Kubeconfig string `pulumi:"kubeconfig"`
}

func GetKubeConfigOutput(ctx *pulumi.Context, args GetKubeConfigOutputArgs, opts ...pulumi.InvokeOption) GetKubeConfigResultOutput {
	return pulumi.ToOutputWithContext(context.Background(), args).
		ApplyT(func(v interface{}) (GetKubeConfigResult, error) {
			args := v.(GetKubeConfigArgs)
			r, err := GetKubeConfig(ctx, &args, opts...)
			return *r, err
		}).(GetKubeConfigResultOutput)
}

type GetKubeConfigOutputArgs struct {
	// node endpoint address
	Endpoint pulumi.StringInput `pulumi:"endpoint"`
	// node address
	Node pulumi.StringInput `pulumi:"node"`
	// talosconfig
	TalosConfig pulumi.StringInput `pulumi:"talosConfig"`
	// timeout in seconds (default 600)
	Timeout pulumi.IntPtrInput `pulumi:"timeout"`
}

func (GetKubeConfigOutputArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*GetKubeConfigArgs)(nil)).Elem()
}

type GetKubeConfigResultOutput struct{ *pulumi.OutputState }

func (GetKubeConfigResultOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*GetKubeConfigResult)(nil)).Elem()
}

func (o GetKubeConfigResultOutput) ToGetKubeConfigResultOutput() GetKubeConfigResultOutput {
	return o
}

func (o GetKubeConfigResultOutput) ToGetKubeConfigResultOutputWithContext(ctx context.Context) GetKubeConfigResultOutput {
	return o
}

// kubeconfig retrieved from the talos cluster
func (o GetKubeConfigResultOutput) Kubeconfig() pulumi.StringOutput {
	return o.ApplyT(func(v GetKubeConfigResult) string { return v.Kubeconfig }).(pulumi.StringOutput)
}

func init() {
	pulumi.RegisterOutputType(GetKubeConfigResultOutput{})
}
